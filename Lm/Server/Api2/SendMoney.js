/*
import nxt.Account;
import nxt.Constants;
import nxt.Nxt;
import nxt.NxtException;
import nxt.Transaction;
import nxt.util.Convert;
import org.json.simple.JSONObject;
import org.json.simple.JSONStreamAware;
*/

/*
import static nxt.user.JSONResponses.NOTIFY_OF_ACCEPTED_TRANSACTION;
*/

/*
static final SendMoney instance = new SendMoney();
*/

function SendMoney() {
	return UserRequestHandler.Create();
}

function ProcessRequest(req, user) {
	/*
	if (user.getSecretPhrase() == null) {
		return null;
	}

	String recipientValue = req.getParameter("recipient");
	String amountValue = req.getParameter("amountNXT");
	String feeValue = req.getParameter("feeNXT");
	String deadlineValue = req.getParameter("deadline");
	String secretPhrase = req.getParameter("secretPhrase");

	Long recipient;
	long amountNQT = 0;
	long feeNQT = 0;
	short deadline = 0;

	try {

		recipient = Convert.parseUnsignedLong(recipientValue);
		if (recipient == null) throw new IllegalArgumentException("invalid recipient");
		amountNQT = Convert.parseNXT(amountValue.trim());
		feeNQT = Convert.parseNXT(feeValue.trim());
		deadline = (short)(Double.parseDouble(deadlineValue) * 60);

	} catch (RuntimeException e) {

		JSONObject response = new JSONObject();
		response.put("response", "notifyOfIncorrectTransaction");
		response.put("message", "One of the fields is filled incorrectly!");
		response.put("recipient", recipientValue);
		response.put("amountNXT", amountValue);
		response.put("feeNXT", feeValue);
		response.put("deadline", deadlineValue);

		return response;
	}

	if (! user.getSecretPhrase().equals(secretPhrase)) {

		JSONObject response = new JSONObject();
		response.put("response", "notifyOfIncorrectTransaction");
		response.put("message", "Wrong secret phrase!");
		response.put("recipient", recipientValue);
		response.put("amountNXT", amountValue);
		response.put("feeNXT", feeValue);
		response.put("deadline", deadlineValue);

		return response;

	} else if (amountNQT <= 0 || amountNQT > Constants.MaxBalanceMilliLm) {

		JSONObject response = new JSONObject();
		response.put("response", "notifyOfIncorrectTransaction");
		response.put("message", "\"Amount\" must be greater than 0!");
		response.put("recipient", recipientValue);
		response.put("amountNXT", amountValue);
		response.put("feeNXT", feeValue);
		response.put("deadline", deadlineValue);

		return response;

	} else if (feeNQT < Constants.OneLm || feeNQT > Constants.MaxBalanceMilliLm) {

		JSONObject response = new JSONObject();
		response.put("response", "notifyOfIncorrectTransaction");
		response.put("message", "\"Fee\" must be at least 1 NXT!");
		response.put("recipient", recipientValue);
		response.put("amountNXT", amountValue);
		response.put("feeNXT", feeValue);
		response.put("deadline", deadlineValue);

		return response;

	} else if (deadline < 1 || deadline > 1440) {

		JSONObject response = new JSONObject();
		response.put("response", "notifyOfIncorrectTransaction");
		response.put("message", "\"Deadline\" must be greater or equal to 1 minute and less than 24 hours!");
		response.put("recipient", recipientValue);
		response.put("amountNXT", amountValue);
		response.put("feeNXT", feeValue);
		response.put("deadline", deadlineValue);

		return response;

	}

	Account account = Account.getAccount(user.getPublicKey());
	if (account == null || Convert.safeAdd(amountNQT, feeNQT) > account.getUnconfirmedBalanceNQT()) {

		JSONObject response = new JSONObject();
		response.put("response", "notifyOfIncorrectTransaction");
		response.put("message", "Not enough funds!");
		response.put("recipient", recipientValue);
		response.put("amountNXT", amountValue);
		response.put("feeNXT", feeValue);
		response.put("deadline", deadlineValue);

		return response;

	} else {

		final Transaction transaction = Nxt.getTransactionProcessor().newTransaction(deadline, user.getPublicKey(),
				recipient, amountNQT, feeNQT, null);
		transaction.sign(user.getSecretPhrase());

		Nxt.getTransactionProcessor().broadcast(transaction);

		return NOTIFY_OF_ACCEPTED_TRANSACTION;

	}
	*/
}

function RequirePost() {
	return true;
}


SendMoney.prototype.ProcessRequest = ProcessRequest;
SendMoney.prototype.RequirePost = RequirePost;


exports.Create = SendMoney;
